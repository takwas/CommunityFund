{% extends "base.html" %}

{% block content %}

<h1>{{ object.name}}</h1>
Initiator: <a href="{% url 'user_profile' slug=object.initiator  %}">{{ object.initiator }}</a><br>
Community: <a href="{% url 'community_details' pk=object.community.id  %}">{{ object.community }}</a><br>
Description: {{ object.description }}<br>
Funding Goal: {{ object.funding_goal }}<br>
Current Funds: {{ object.current_funds }}<br>
Publication Date: {{ object.pub_date }}<br>

{% if object.current_funds == object.funding_goal %}
    Project Rating: {{ rating }} ({{ num_ratings }} ratings)<br>
{% endif %}

<footer>
    {% if user.is_authenticated %}
    <p>
        {% if user == object.initiator %}
            <a id="update_project" href="{% url 'project_update' cid=object.community.id pk=object.pk %}">Edit Project</a>
            <a id="delete_project" href="{% url 'project_delete' cid=object.community.id pk=object.pk %}">Delete Project</a>
        {% elif is_member %}
        
            {% if object.current_funds < object.funding_goal %}
                <a id="fund_project" href="{% url 'fund_project' cid=object.community.id pk=object.pk %}">
                    Fund Project
                </a>
            {% elif did_fund and not did_rate_project %}
                <a id="rate_project" href="{% url 'rate_project' cid=object.community.id pk=object.pk %}">
                    Rate Project
                </a>
            {% endif %}

            {% if not did_rate_user and did_fund %}
                <a id="rate_user" href="{% url 'rate_init' cid=object.community.id pk=object.pk %}">
                    Rate Initiator
                </a>
            {% endif %}
        {% endif %}

        <a id="view_funders" href="{% url 'funders_view' cid=object.community.id pk=object.pk %}">View Funders</a>
    </p>
    {% endif %}
</footer>


{% endblock %}
